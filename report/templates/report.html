{% extends 'base.html' %}
{% load static %}

{% block headone %}
<title>Report</title>
<!-- <link rel="stylesheet" type="text/css" href="{% static '/css/report.css' %}">
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
{% endblock %}


{% block content %}

<!-- <header class="fixed-top">
  <a href="{% url 'nobokek:show_nobokek' %}" class="logo">NoBokek App</a>
  <div class="group">
    
    <ul class="navigation">
      <li><a href="{% url 'add:show_add' %}">Add</a></li>
      <li><a href="#">Statistic</a></li>
      <li><a href="{% url 'report:show_report' %}">Report User Info</a></li>
      <li><a href="#">Forum</a></li>
      <li><a href="{% url 'nobokek:contact' %}" class="contact-us">Contact Us</a></li>      
      <li><a href="{% url 'nobokek:logout' %}" class="logout">Logout</a></li>
    </ul>
    <div class="search">
      <span class="icon">
        <ion-icon name="search-outline" class="searchBtn"></ion-icon>
        <ion-icon name="close-outline" class="closeBtn"></ion-icon>
      </span>
    </div>
    <ion-icon name="menu-outline" class="menuToggle"></ion-icon>
  </div>
  <div class="searchBox">
    <input type="text" placeholder="Search here...">
  </div>
  
</header> -->

<!-- Navbar -->


<!-- Modal -->
<!-- Modal -->
<!-- <form action="" method="POST" id="addTodoList">  
  {% csrf_token %} 
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Create Your Todolist!</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input class="form-control" type="text" id="title" name="title" placeholder="Title" aria-label="Title" aria-describedby="basic-addon1">
                        <br><input class="form-control" type="text" id="description" name="description" placeholder="Description" aria-label="Description" aria-describedby="basic-addon1">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary" data-bs-dismiss="modal" id="createBtn">Add</button>
        </div>
      </div>
    </div>
  </div>

<div class="row row-cols-md-3 mx-auto justify-content-center" id="container">

</div> -->

<div class="d-flex justify-content-center mt-3 mb-2 text-center text-capitalize">
  <h1 class="judul-pesan">Your Report!</h1>
</div>


<!-- Bagian Riwayat -->
<div class="container">
  <div class="row">
    <div class="col d-flex justify-content-center mt-5">
      <div class="card border border-dark" style="width: 30rem;">
        <h1 class="judulDanaTerkumpul center">Total Income</h1>
        <div class="container">
            <h3 class="danaTerkumpul center mb-5">Rp.10000</h3>
        </div>  
      </div>
    </div>
    <div class="col d-flex justify-content-center mt-5">
      <div class="card border border-dark" style="width: 30rem;">
        <h1 class="judulDanaTerkumpul center">Total Outcome</h1>
        <div class="container">
            <h3 class="danaTerkumpul center mb-5">Rp.10000</h3>
        </div>  
      </div>
    </div>
  </div>
</div>

<div style="height: 50px;"></div>




<!-- Bagian Pesan -->
<script>
  $(document).ready(function(){
      
  
      $("#id_isi").keyup(function(){
          //character count isi txt area pesan
  
          var txtlength = $("#id_isi").val().length;
          $("#lettercount").empty();
  
          if (txtlength > 0) {
              $("#lettercount").append(txtlength+"/100");
          } 
          
          if (txtlength > 85) {
              $("#lettercount").empty();
              $("#lettercount").append('<span style="color:red;">' + txtlength + '/100</span>');
          }
          
      });
  
  
      $("#tombol-kirim").click(function(){
          //ajax untuk simpan pesan dan nampilin pesan yg baru dimasukkin tsb.
  
          var isi = $("#id_isi").val();
          // alert(isi);
          if (isi.length > 0 && isi != "") {
              $.ajax({url: "pesanajax?q=" + isi, success: function(result){
                  console.log(result);
      
                  $("#divpesan").empty();
                  $("#id_isi").val("");
                  $("#lettercount").empty();
      
                  $("#divpesan").append("<p class=\"judul-pesan\">Target Kamu</p>")
                  $("#divpesan").append('<div class="row" id="kumpulan-pesan"></div>')
                  var i;
                  for (i=0; i<result.length; i++){
                      var isiPesan = result[i].fields.isi;
                      var nama = result[i].fields.nama;
                      // alert(isiPesan + nama);
                      $("#kumpulan-pesan").append('<div class="col-md-4 mb-4"> <div class="card" style="height: 200px;"><div class="card-body"><div class="pesan-textfield"><p style="padding-top: 10px;">' +isiPesan+ '</p></div><div class="pesan-nama"><p style="right: 0; position: absolute;">-' +nama+ '</p></div></div></div></div>')
                  }
              }});
          } else {
              alert("Anda belum mengisi pesan!");
          }
          
      });
  });
  </script>

<div class="container-tulisan">
  <div class="bagian-text" id="divpesan">
      <p class="judul-pesan">Target Kamu</p>
      <div class="row" id="kumpulan-pesan">
          {% for pesan in pesans %}
            <div class="col-md-4 mb-4">
                <div class="card" style="height: 300px; margin-top: 20px; margin-left: 35px;">
                    <div class="card-body">
                        <div class="pesan-textfield">
                            <p style="padding-top: 30px;">{{ pesan.isi }}</p>
                        </div>
                        <div class="pesan-nama">
                            <p style="right: 100px; position: absolute;">- {{ pesan.nama }}</p>
                        </div>
                    </div>
                </div>
            </div>
          {% endfor %}
      </div>
  </div>
  <div class="bagian-text">
      {%if user.is_authenticated%}
      <p class="judul-pesan">Berikan Target</p>
      
          {% csrf_token %}
          <p>
              <textarea name="isi" cols="40" rows="10" class="form-control" maxlength="100"
                  placeholder="Masukkan pesan anda" required="" id="id_isi"></textarea>
          </p>
          <p id="lettercount"></p>
          <div class="kananin">
              <button class="btn btn-primary rounded-pill btn-donasi" id="tombol-kirim">Kirim</button>
          </div>

      <!-- </form> -->
      {% else %}
      <p class="judul-pesan" style="font-size: 30px; color: black;"><a href="/login/">login</a> untuk memberikan
          pesan</p>
      {% endif %}
  </div>
</div>



{% endblock %}